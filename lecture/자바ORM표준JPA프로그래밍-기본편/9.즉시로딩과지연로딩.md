# 9. 즉시로딩과 지연로딩

- 지연로딩
  - @ManyToOne(fetch = FetchType.LAZY)
  - 로딩시 lazy로 지정한 엔티티는 프록시로 가지고옴
  - 객체를 전체를 가져올떄가 아닌 사용하는 시점에 초기화됨(DB 조회)
- 즉시로딩
  - @ManyToOne(fetch = FetchType.EAGER)
  - 프록시를 사용하지 않고, 처음부터 조회할때 조인해서 한꺼번에 가지고옴
- JPA 구현체는 가능하면 조인을 사용해서 SQL을 한번해 조회하도록 함
- **프록시와 즉시로딩 주의**
  - 가급적 지연로딩만 사용
  - 즉시로딩을 적용하면 예상하지 못한 SQL이 발생
  - 즉시로딩은 JPQL에서 N+1문제를 일으킨다.
    - 직접 쿼리를 실행시키면, 쿼리가 실행되고 객체내에 EAGER로 선언된 쿼리가 추가로 실행됨
  - **@ManyToOne, @OneToOne은 기본이 즉시로딩 -> LAZY로 설정해야함**