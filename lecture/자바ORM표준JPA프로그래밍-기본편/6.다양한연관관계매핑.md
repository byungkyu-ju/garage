# 6. 다양한 연관관계 매핑

- 연관관계의 주인
  - 테이블은 외래키 하나로 두 테이블이 연관관계를 맺음
  - 연관관계의 주인 : 외래키를 관리하는 참조
  - 주인의 반대편 : 단순 조회만 가능
- N : 1
  - 단방향
    - 가장많이 사용
  - 양방향
    - 연관관계의 주인 : 외래키가 있는 쪽
    - 양쪽을 서로 참조하도록 개발
- 1 : N
  - 단방향
    - 연관관계의 주인 : N이 아닌 1
    - 1 : N 관계는 항상 N에 외래키가 존재함
    - 객체와 테이블의 차이 때문에 반대편 테이블의 외래키를 관리하는 특이한 구조
    - @JoinColumn을 꼭 사용해야 함. 그렇지 않으면 조인 테이블 방식을 사용함.
    - 단점
      - 엔티티가 관리하는 외래키가 다른 테이블에 있음
      - 연관관계를 위해 추가로 UPDATE문 실행
    - 1 : N 단방향 매핑보다는 N : 1매핑을 사용하자.
  - 양방향
    - 공식적인 존재 X
    - @JoinColumn(insertable=false, updatable=false)
    - 읽기 전용 필드를 사용해서 양방향처럼 사용하는 방법
    - N : 1 양방향을 사용하자
- 1: N
  - 주 테이블이나 대상 테이블 중에 외래키 선택 가능
    - 주 테이블에 외래키
    - 대상 테이블에 외래키
  - 외래키에 Unique조건 추가
  - 단방향
    - N : 1과 유사
  - 양방향
    - N : 1 양방향 매핑처럼 외래키가 있는 곳이 연관관계의 주인
    - 반대편은 mappedBy 적용
- N : M
  - 최대한 사용X
  - 브릿지 테이블을 만들어서 FK들을 관리하고 1:N , N : 1관계로 풀도록 우회
  